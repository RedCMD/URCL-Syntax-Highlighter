{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Simple URCL Syntax",
	"scopeName": "source.redcmd.syntax.urclpp",
	"injections": {
		"L:loop.urclpp": {
			"patterns": [
				{ "include": "#EXIT" },
				{ "include": "#SKIP" }
			]
		}
	},
	"patterns": [
		{ "include": "#IF"				},
		{ "include": "#FOR"				},
		{ "include": "#WHILE"			},
		{ "include": "#SWITCH"			},
		{ "include": "#preprocessor"	},
		{ "include": "#parenthesis"		},
		{ "include": "#label"			},
		{ "include": "#invalid"			},
		{ "include": "source.redcmd.syntax.simple.urcl" }
	],
	"repository": {
		"preprocessor": {
			"match": "\\b(?i:LCAL|DEFINE|OUTS|OPS|REG|TEMP|IMPORT)\\b",
			"name": "keyword.control"
		},
		"IF": {
			"begin": "(?i)\\bIF\\b",
			"end": "(?i)\\bEND\\b",
			"captures": { "0": { "name": "keyword.control" } },
			"patterns": [
				{ "include": "#ELIF" },
				{ "include": "#ELSE" },
				{ "include": "$self" }
			]
		},
		"ELIF": {
			"begin": "(?i)\\bELIF\\b",
			"end": "(?i)(?=\\bEND\\b)",
			"captures": { "0": { "name": "keyword.control" } },
			"patterns": [
				{ "include": "#ELIF" },
				{ "include": "#ELSE" },
				{ "include": "$self" }
			]
		},
		"ELSE": {
			"begin": "(?i)\\bELSE\\b",
			"end": "(?i)(?=\\bEND\\b)",
			"captures": { "0": { "name": "keyword.control" } },
			"patterns": [ { "include": "$self" } ]
		},
		"FOR": {
			"begin": "(?i)\\bFOR\\b",
			"end": "(?i)\\bEND\\b",
			"contentName": "loop.urclpp",
			"captures": { "0": { "name": "keyword.control" } },
			"patterns": [ { "include": "$self" } ]
		},
		"WHILE": {
			"begin": "(?i)\\bWHILE\\b",
			"end": "(?i)\\bEND\\b",
			"contentName": "loop.urclpp",
			"captures": { "0": { "name": "keyword.control" } },
			"patterns": [ { "include": "$self" } ]
		},
		"EXIT": {
			"match": "(?i)\\bEXIT\\b",
			"name": "keyword.control"
		},
		"SKIP": {
			"match": "(?i)\\bSKIP\\b",
			"name": "keyword.control"
		},
		"SWITCH": {
			"begin": "(?i)\\bSWITCH\\b",
			"end": "(?i)\\bEND\\b",
			"captures": { "0": { "name": "keyword.control" } },
			"patterns": [
				{
					"match": "\\b(?i:DEFAULT|CASE)\\b",
					"name": "keyword.control"
				},
				{ "include": "$self" }
			]
		},
		"parenthesis": {
			"match": "[()]",
			"name": "entity.name.label"
		},
		"label": {
			"match": "(?<!\\w)(?>\\.\\w+)+",
			"name": "support.function"
		},
		"invalid": {
			"match": "(?i)EXIT|SKIP|DEFAULT|CASE",
			"name": "invalid"
		}
	}
}